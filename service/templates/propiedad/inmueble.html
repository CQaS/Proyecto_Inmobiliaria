{% extends 'layouts/base00.html' %}

{% load static %}

{% block content %}

<div id="overlay"></div>

{% for D in detalle %}
<style>
#map {
    width: 100%;
    height: 400px;
}
</style>

<div class="box">
    <div class="dir">
        <p>{{  D.dir_inmueble  }}</p>
    </div>

    <div class="operacion">
        <p>{{ D.tipo_operacion }}</p>
    </div>

    <div class="valor">
        <p>U$S {{ D.valor_inmueble }}</p>
    </div>

    <div class="carrusel">
        <div class="atras botones">&#60;</div>
        <div class="adelante botones">&#62;</div>
        <!-- como resolver el link de las imagenes -->
        <img src="" alt="" class="carruselImagen">
    </div>


    <div class="info-basica">
        <h3>INFORMACION BASICA</h3>
        <hr class="hr_detalle">
        <!-- va una table 2 columnas x 4 filas -->
        <label for="">Ciudad: {{ D.ciudad_inmueble }}</label>
        <label for="">Tipo Inmueble: {{ D.tipo_inmueble }}</label>
        <label for="">Cantidad Plantas: {{ D.cant_plantas }}</label>
        <label for="">Cantidad Dormitorios: {{ D.cant_dormitorios }}</label>
        <label for="">Cantidad Baños: {{ D.cant_banos }}</label>
    </div>

    <div class="sup-medidas">
        <h3>SUPERFICIES Y ADICIONALES</h3>
        <hr class="hr_detalle">

        <label for="">Sup. Total: {{ D.sup_total }}</label>
        <label for="">Sup. Cubierta: {{ D.sup_cubierta }}</label>
        <label for="">Sup. Semicubierta: {{ D.sup_semicub}}</label>
        <label for="">Cochera: {% if D.cochera %}SI{% else %}NO{% endif %}</label>
        <label for="">Expensas: {% if D.expensas %}SI{% else %}NO{% endif %}</label>
    </div>


    <div class="descripcion">
        <h3>DESCRIPCION</h3>
        <hr class="hr_detalle">
        <p>{{ D.descripcion }}</p>
    </div>

    <div class="servicios">
        <h3>SERVICIOS</h3>
        <hr class="hr_detalle">
        <label for=""> {{ D.tipo_servicio }} </label>

    </div>


     <!--<div class="mapa">
        <h3>UBICACION</h3>
        <hr class="hr_detalle"><br>
        <p id="location-info"></p>

        <div id="map_container" style="width: 100%;">
            <div id="map" style="width: 800px; height: 400px; margin-left: 10%;">
            </div>
            <div id="loading-spinner" class="loading-spinner"></div>
        </div> 
    
    <p>{{  D.dir_inmueble  }}</p>
    <p>{{  D.ciudad_inmueble  }}</p>
    <div id="map"></div>

    </div> 

</div>-->

    <div id="map"></div>

<script>
    var map = L.map('map').setView([0, 0], 14); // Inicializa el mapa en un punto central

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    function buscarDireccion() {
        var direccion = '{{ D.dir_inmueble }}'

        // Utiliza el servicio de geocodificación de OpenStreetMap (Nominatim)
        fetch('https://nominatim.openstreetmap.org/search?format=json&q=' + encodeURIComponent(direccion))
            .then(response => response.json())
            .then(data => {
                if (data.length > 0) {
                    var lat = data[0].lat;
                    var lon = data[0].lon;
                    map.setView([lat, lon], 14);
                    L.marker([lat, lon]).addTo(map)
                        .bindPopup(direccion)
                        .openPopup();
                }
            });
    }
    // let d_InmuebleOnPin = '{{ D.dir_inmueble }}'
    // let inmueble_html = true
    // let l1 = '{{ D.latitud }}'
    // let l2 = '{{ D.longitud }}'
    
    


    // Arreglo de imagenes
    let pictures = {{ fotos|safe }}
</script>



{% endfor %}
{% endblock%}